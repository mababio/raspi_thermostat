from crontab import CronTab


class Schedule(object):

	def __init__(self,day,sch_type,time,temp): 
		self.day = day
		self.sch_type =  sch_type
		self.time = time
		self.temp = temp
		self.command = "thermo" + self.temp


	def set_schedule(self):
		cron_time = to_cron_time(time)
		cron_obj = CronTab(user=True)
       		job =  cron_obj.new(command=self.command)
        	job.setall(cron_time)
        	if not is_conflict(job):
                	cron_obj.write()
        	else:
                	print('conflict with crontab job')


	def to_cron_time(day,human_time):
        	#convert human readable time --. 9:30 to crontab --> 30 9 * * *
        	hour = human_time.split(":")[0]
        	minute =  human_time.split(":")[1]
		day_num = day_to_num(day)
        	return minute+' '+hour+' * * '+ day_num


	def day_to_num(day):

		if day == 'mon':
			return 1
		elif day == 'tues':
			return 2
		elif day == 'wed':
			return 3
		elif day == 'thurs':
			return 4
		elif day == 'fri':
			return 5
		elif day == 'sat':
			return 6


if __name__ == '__main__':
	set_schedule('sat','day',"1:51",69)
